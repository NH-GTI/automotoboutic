<?php
/*
StoreCommander
*/
 goto jmeZE; Nu4X6: $current_sc_module_folder_name = basename(realpath("\x2e\56\57\x2e\x2e\57")); goto HbguX; T6dsi: $local_images = $tmp; goto hqk7i; ruWN3: EgcIe: goto j7btn; mhBQ9: PrestaShopLogger::addLog($log_id . "\40\105\x52\122\x3a\40\105\155\x70\x74\171\x20\160\x61\162\x61\155\40\x3a\x20" . implode("\54", $param_err), 1, null, null, null, true); goto T53Ua; woQuT: Cceco: goto TT3zR; BAP8M: if (is_array($distant_images)) { goto TAAJ7; } goto ZfCiz; BVzDa: goto Czd1C; goto TftZa; XGAYc: $param_err = array(); goto EffLV; encGr: $param_err[] = "\x76\145\x72\163\151\x6f\x6e"; goto H3d3A; y5GQZ: $distant_auth = (string) $_SERVER["\110\x54\x54\x50\x5f\x4f\x43\x49\x41\125\124\x48"]; goto Dzxcg; krJkl: $param_err[] = "\163\x65\143\162\x65\x74"; goto woQuT; Zl2gn: iYuBo: goto vGlHI; ll_gS: if (!empty($_SERVER["\110\124\x54\x50\x5f\117\x43\111\x56\105\122\123\x49\117\x4e"])) { goto k8Y2B; } goto XWvmh; xij0N: PT5W8: goto Bze8W; ARsaI: Logger::addLog($log_id . "\x20\105\122\122\72\x20\115\151\x73\163\x69\156\147\40\x70\x61\162\x61\x6d\x20\72\x20" . implode("\x2c", $param_err), 1, null, null, null, true); goto oHEFF; vB6_D: if (array_key_exists("\110\x54\124\x50\137\117\x43\111\126\105\122\123\111\x4f\116", $_SERVER)) { goto PJGZE; } goto DSE_1; nxT0j: die; goto CPDXz; zc9_w: if (!($local_secret !== $distant_secret)) { goto GpPOv; } goto DzWwX; hGgX0: yLsYu: goto Oa7cX; UKmxj: PrestaShopLogger::addLog($log_id . "\40\x45\x52\x52\x3a\x20\123\x43\40\x66\157\154\144\x65\x72\40\156\x6f\164\40\x66\157\165\x6e\144", 1, null, null, null, true); goto TLLSA; AgAu6: header("\110\124\x54\x50\x2f\61\56\60\40\x34\x30\x31\40\x45\x6d\x70\164\x79\40\160\x61\x72\x61\x6d\145\164\145\162"); goto ZL9WP; WFIaE: $local_auth = Configuration::get("\x53\x43\137\125\x4e\x49\121\x55\x45\x5f\111\x44", null, 0, 0); goto rLwG0; gTu7a: $scFolderHash = Configuration::get("\123\x43\x5f\x46\x4f\x4c\104\x45\122\x5f\110\101\x53\x48"); goto p2voe; w3zk_: if (!(!$scInstalled || !Module::isEnabled($current_sc_module_folder_name))) { goto LHXfI; } goto W72ne; XQBHN: y29wy: goto w3zk_; c2LRW: if (!empty($_SERVER["\x48\x54\124\120\137\117\103\x49\x53\105\x43\x52\x45\124"])) { goto yNQy8; } goto jA4As; ZL9WP: die; goto uzrF_; OS8Ls: foreach ($distant_images as $distant_image) { goto Mtcns; nXoGV: SCI::addLog($log_id . "\x20\105\x52\122\137\x49\x4d\x47\72\40\151\x6d\141\147\x65\40\156\x6f\x74\40\146\157\165\156\x64\40\151\x6e\40\x6c\x6f\x63\x61\x6c\x20\72\x20" . $distant_image["\x69\x64\151\x6d\147"] . "\x2d" . $distant_image["\165\162\154"], 1, null, null, null, true); goto lBRLP; lBRLP: goto bmVtZ; goto mU1s0; B9u_U: XhLix: goto j6CeW; aFxPi: UQ0WO: goto umdvE; tNesh: grk7o: goto aFxPi; oz8W5: $ork_info = array("\157\162\x6b\137\x73\164\141\x74\x75\163" => $distant_image["\x6f\162\153\x5f\163\x74\x61\x74\165\163"], "\x6f\x72\153\x5f\x73\164\141\164\165\x73\137\155\x65\163\163\x61\x67\x65" => $distant_image["\x6f\162\x6b\137\x73\141\x74\165\x73\137\x6d\x65\163\x73\x61\x67\145"]); goto V3roJ; Mtcns: if ($distant_image["\141\x75\x74\x68"] == $local_auth) { goto pC0uM; } goto RjvO8; umdvE: bmVtZ: goto YNCyk; V3roJ: switch ((int) $distant_image["\x6f\162\153\x5f\163\164\141\x74\165\x73"]) { case 3: $sql[] = "\x55\120\x44\x41\124\105\40" . _DB_PREFIX_ . "\x73\164\x6f\x72\x65\x63\x6f\x6d\x5f\x69\155\x61\x67\145\x66\x69\154\x65\40\123\x45\x54\x20\x60\163\x74\x61\164\x75\x73\x60\x20\x3d\40" . (int) $compression_status["\x65\x72\x72\157\162"] . "\54\40\x60\x6f\162\153\137\x69\x6e\146\157\140\75\x20\x22" . pSQL(json_encode($ork_info)) . "\x22\40\127\110\105\122\x45\x20\x60\x69\x64\137\x73\164\157\162\145\143\x6f\155\x5f\x69\x6d\x61\x67\x65\146\x69\154\x65\x60\x20\75\40" . (int) $distant_image["\x69\x64\151\x6d\x67"]; goto UQ0WO; case 4: $sql[] = "\125\x50\x44\101\x54\105\x20" . _DB_PREFIX_ . "\x73\164\x6f\162\x65\x63\x6f\x6d\137\151\x6d\x61\147\145\146\x69\154\145\40\x53\x45\x54\x20\x60\x73\x74\141\164\165\x73\140\40\x3d\40" . (int) $compression_status["\151\147\156\157\x72\x65\144"] . "\54\x20\140\157\x72\153\137\151\156\146\x6f\140\75\40\42" . pSQL(json_encode($ork_info)) . "\x22\40\127\x48\x45\122\x45\40\140\151\144\x5f\163\x74\157\162\x65\x63\x6f\x6d\x5f\151\x6d\141\x67\145\x66\151\154\x65\140\40\75\x20" . (int) $distant_image["\151\x64\x69\x6d\x67"]; goto UQ0WO; default: goto j8Ivp; lE2W_: $sql[] = "\x55\x50\104\101\124\x45\x20" . _DB_PREFIX_ . "\x73\164\157\162\145\x63\157\x6d\137\151\155\141\147\x65\146\151\x6c\x65\40\123\x45\124\40\140\x73\164\x61\x74\x75\163\140\x20\x3d\40" . (int) $compression_status["\x65\162\x72\x6f\x72"] . "\x2c\40\140\x6f\x72\x6b\137\151\156\x66\x6f\x60\75\x20\x22" . pSQL(json_encode($ork_info)) . "\42\40\x57\110\x45\122\x45\x20\140\151\x64\x5f\163\164\157\x72\x65\x63\x6f\x6d\137\151\155\141\x67\x65\x66\x69\154\x65\140\x20\75\40" . (int) $distant_image["\x69\144\151\155\x67"]; goto X2YqF; AiDNK: $sql[] = "\x55\x50\104\101\x54\x45\x20" . _DB_PREFIX_ . "\163\164\x6f\162\x65\143\157\x6d\x5f\151\x6d\141\147\x65\x66\x69\154\x65\x20\x53\x45\124\40\140\163\164\141\164\165\x73\x60\40\75\x20" . (int) $compression_status["\145\162\162\157\x72"] . "\x2c\40\x60\157\162\x6b\137\151\156\146\157\x60\x3d\40\42" . pSQL(json_encode($ork_info)) . "\x22\40\x57\x48\x45\122\x45\40\140\x69\x64\x5f\x73\x74\157\x72\x65\x63\157\x6d\137\x69\x6d\141\147\145\146\x69\154\x65\140\40\75\x20" . (int) $distant_image["\151\x64\x69\x6d\147"]; goto vckLZ; cwToU: goto W0NYm; goto ua_Df; YNMdS: $sql[] = "\125\x50\x44\x41\x54\x45\40" . _DB_PREFIX_ . "\163\164\157\x72\x65\x63\x6f\155\x5f\151\x6d\141\147\145\x66\151\154\x65\40\x53\105\x54\40\140\163\x74\x61\x74\x75\x73\140\40\75\x20" . (int) $compression_status["\151\x67\156\x6f\162\145\x64"] . "\x2c\x20\x60\157\162\153\x5f\151\156\x66\157\140\75\40\42" . pSQL(json_encode($ork_info)) . "\x22\x20\x57\x48\105\x52\x45\x20\140\x69\x64\x5f\x73\x74\157\x72\x65\x63\157\x6d\x5f\x69\155\x61\x67\x65\x66\x69\154\145\x60\x20\x3d\x20" . (int) $distant_image["\151\x64\x69\155\147"]; goto cwToU; FLamZ: iqlcm: goto KVRzG; VPcOe: DGVJZ: goto yMIR1; Ja0VT: goto Y91bQ; goto Z30Mk; yMIR1: Y91bQ: goto QtCRp; lv7y2: $write_file = file_put_contents($local_image_path, $compressed_image_data); goto u_Fi2; nxzfl: $ork_info["\143\141\x6c\x6c\151\x6e\x67\137\151\155\x67\137\x74\x6f\137\x73\141\x76\x65"] = json_decode($compressed_image_data); goto lE2W_; I5w_I: $local_image_path = _PS_ROOT_DIR_ . $current_local_image["\160\x61\x74\150"]; goto nYss0; lkX0n: $current_local_image = $local_images[$distant_image["\151\x64\x69\x6d\147"]]; goto guxeE; KVRzG: W0NYm: goto EHbMs; guxeE: $compressed_image_data = sc_file_get_contents($distant_image["\143\157\155\160\x72\x65\163\x73\x65\144\137\x75\162\154"]); goto fEKtH; cwo5d: $ork_info["\157\162\x6b\x5f\163\164\x61\164\165\x73\x5f\x6d\x65\x73\x73\141\x67\x65"] = "\x53\151\x7a\x65\x20\x63\x6f\155\160\x72\x65\163\163\x65\144\x20\151\163\x20\150\151\147\150\x65\162\40\x74\x68\141\x6e\x20\157\x72\151\147\151\x6e\141\x6c"; goto YNMdS; nYss0: $origin_size = filesize($local_image_path); goto VVh7m; EnW9w: f_JN8: goto q2NzC; q2NzC: $sql[] = "\x55\120\104\x41\124\x45\x20" . _DB_PREFIX_ . "\163\164\x6f\162\x65\x63\157\x6d\137\151\x6d\x61\147\x65\146\x69\154\145\12\40\40\40\40\x20\40\40\x20\40\x20\40\x20\40\40\x20\40\x20\x20\x20\40\40\40\x20\x20\x20\40\x20\40\x20\40\40\40\x20\x20\40\x20\40\x20\40\40\x20\40\x20\x20\x20\x20\40\40\40\40\x20\40\40\x20\40\x20\123\x45\124\40\x60\163\x74\x61\x74\x75\x73\140\x20\x3d\x20" . (int) $compression_status["\x63\157\x6d\160\162\x65\163\163\x65\x64"] . "\54\xa\40\40\40\40\40\x20\x20\x20\40\x20\x20\40\x20\40\x20\40\40\x20\40\x20\40\x20\40\x20\40\40\40\40\x20\x20\40\40\x20\40\40\x20\40\x20\40\40\x20\40\40\40\x20\40\40\x20\40\x20\x20\40\40\40\x20\x20\x60\163\x69\x7a\x65\x5f\143\x6f\155\160\162\x65\163\x73\x65\x64\x60\75" . (int) $distant_image["\x73\151\x7a\x65\x5f\x63\x6f\155\x70\162\145\163\163\145\x64"] . "\54\xa\x20\40\x20\40\x20\40\40\x20\x20\x20\40\x20\40\x20\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\40\40\x20\x20\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x20\40\x20\40\40\140\x6f\x72\153\137\x69\x6e\146\x6f\x60\75\40\x22" . pSQL(json_encode($ork_info)) . "\x22\xa\x20\x20\x20\40\x20\x20\40\40\x20\40\40\x20\40\x20\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\40\40\x20\x20\40\40\40\40\40\x20\40\x20\x20\x20\x20\x20\40\40\x20\40\40\x20\40\40\40\40\40\x20\x20\x20\127\x48\x45\122\105\x20\x60\x69\x64\x5f\x73\x74\x6f\162\145\x63\x6f\155\x5f\151\155\141\x67\145\x66\x69\x6c\145\140\40\x3d\x20" . $distant_image["\x69\x64\x69\x6d\147"]; goto FLamZ; zzg22: F2hLP: goto I5w_I; ua_Df: CYtjC: goto lv7y2; avJJs: if ($compressed_image_data !== false && validImage($compressed_image_data)) { goto F2hLP; } goto nxzfl; s90v8: $ork_info["\x6f\x72\x6b\137\x65\162\x72\x6f\x72\x5f\144\145\164\x61\x69\154"] = array("\105\x52\122\137\x49\115\x47\x3a\40\111\x6d\x70\157\163\163\x69\x62\154\145\x20\x74\x6f\40\167\x72\x69\164\x65\40\154\x6f\x63\x61\154\x20\146\x69\154\145", $current_local_image["\160\x61\x74\150"]); goto oZSdP; WDhnd: kYP_z: goto avJJs; vckLZ: goto DGVJZ; goto WDhnd; X2YqF: goto F5kSs; goto zzg22; Mr9Mr: goto iqlcm; goto EnW9w; nrsPz: $sql[] = "\125\120\x44\x41\x54\x45\40" . _DB_PREFIX_ . "\x73\164\x6f\162\145\143\157\155\137\x69\x6d\141\x67\145\x66\x69\154\x65\40\x53\x45\x54\40\140\163\x74\x61\164\x75\x73\140\40\x3d\40" . (int) $compression_status["\145\162\162\157\162"] . "\54\40\x60\157\162\153\137\151\156\x66\157\140\75\40\x22" . pSQL(json_encode($ork_info)) . "\x22\x20\127\110\105\122\105\40\x60\151\x64\137\163\x74\x6f\162\x65\143\157\x6d\x5f\151\155\x61\x67\x65\x66\x69\x6c\x65\140\40\x3d\x20" . (int) $distant_image["\151\144\151\x6d\x67"]; goto Ja0VT; VVh7m: if ($distant_image["\163\151\x7a\x65\x5f\143\x6f\x6d\160\162\145\x73\163\145\144"] <= $origin_size) { goto CYtjC; } goto cwo5d; j8Ivp: $compressed_domain_url = parse_url($distant_image["\x63\x6f\x6d\x70\162\145\x73\x73\145\144\x5f\165\x72\x6c"], PHP_URL_HOST); goto Y9G0_; lE7Mo: $ork_info["\x6f\162\153\x5f\x65\x72\x72\x6f\162\137\144\x65\x74\x61\151\154"] = array("\105\x52\x52\137\x49\115\x47\72\40\x65\155\160\x74\171\40\151\155\x61\147\x65\40\x64\141\x74\141", $distant_image["\x63\x6f\x6d\x70\162\x65\163\163\x65\x64\137\x75\x72\154"]); goto AiDNK; oZSdP: $sql[] = "\125\x50\104\x41\124\105\x20" . _DB_PREFIX_ . "\163\x74\157\x72\x65\x63\x6f\x6d\x5f\151\x6d\141\147\x65\x66\151\154\145\40\x53\x45\x54\x20\140\x73\164\141\x74\165\x73\140\40\x3d\x20" . (int) $compression_status["\145\x72\162\157\x72"] . "\x2c\x20\x60\157\162\x6b\137\x69\156\x66\157\140\x3d\x20\x22" . pSQL(json_encode($ork_info)) . "\42\x20\127\x48\x45\122\x45\40\x60\x69\144\x5f\x73\164\157\x72\145\143\157\155\x5f\x69\155\141\x67\x65\146\x69\x6c\x65\140\x20\x3d\x20" . (int) $distant_image["\151\x64\151\x6d\x67"]; goto Mr9Mr; yTzwL: if (!empty($distant_image["\143\157\155\x70\x72\145\x73\163\145\x64\137\165\x72\x6c"]) && is_string($distant_image["\143\157\x6d\x70\x72\145\163\163\x65\x64\x5f\x75\162\154"]) && filter_var($distant_image["\143\157\155\x70\x72\145\163\x73\145\144\x5f\x75\162\x6c"], FILTER_VALIDATE_URL) !== false && $compressed_domain_url === $domain_compressor) { goto hr3kL; } goto YufwG; Y9G0_: $compressed_domain_url = hash("\x73\x68\x61\x32\65\x36", $compressed_domain_url, false); goto yTzwL; u_Fi2: if ($write_file !== false) { goto f_JN8; } goto s90v8; YufwG: $ork_info["\157\162\153\137\x65\x72\162\157\162\137\x64\145\x74\x61\x69\154"] = array("\x45\122\x52\x5f\x49\x4d\107\72\x20\167\x72\x6f\156\x67\40\143\x6f\x6d\160\162\145\163\x73\x65\144\x5f\165\x72\x6c", $distant_image["\143\x6f\155\x70\x72\145\163\163\145\x64\x5f\165\162\x6c"]); goto nrsPz; Z30Mk: hr3kL: goto lkX0n; fEKtH: if (!empty($compressed_image_data)) { goto kYP_z; } goto lE7Mo; EHbMs: F5kSs: goto VPcOe; QtCRp: } goto tNesh; fC1Es: pC0uM: goto rjn82; RjvO8: SCI::addLog($log_id . "\x20\105\122\x52\x5f\x49\x4d\107\72\x20\x57\x72\157\x6e\x67\x20\x69\155\141\147\145\40\x61\165\x74\x68\40\72\x20" . $distant_image["\165\x72\154"], 1, null, null, null, true); goto QBlTc; mU1s0: t_rsk: goto oz8W5; rjn82: if (array_key_exists($distant_image["\151\x64\151\155\147"], $local_images)) { goto t_rsk; } goto nXoGV; YNCyk: MxKQ9: goto B9u_U; QBlTc: goto MxKQ9; goto fC1Es; j6CeW: } goto It2K0; HbguX: if (version_compare(_PS_VERSION_, "\61\56\67", "\76\75")) { goto PT5W8; } goto q18mQ; Bze8W: $legacyLogger = new PrestaShop\PrestaShop\Adapter\LegacyLogger(); goto skL4q; rhTZI: $param_err[] = "\x61\165\x74\150"; goto ohneq; ZHsAp: $_POST = null; goto NNLj6; q18mQ: $scInstalled = Module::isInstalled($current_sc_module_folder_name); goto C6nvz; H3d3A: hAVV3: goto zc9_w; TKUg0: if (!(empty($_SERVER["\110\x54\x54\120\137\117\x43\x49\x41\125\x54\x48"]) || empty($_SERVER["\x48\x54\x54\120\137\117\103\x49\126\x45\x52\x53\x49\117\x4e"]) || empty($_SERVER["\x48\x54\x54\120\137\x4f\103\111\123\x45\x43\x52\105\x54"]) || empty($distant_images))) { goto n4ymU; } goto xcEww; RDDHn: $current_sc_module_folder_name = basename(realpath("\56\56\57\56\x2e\57")); goto rIx5X; ppdoh: IKvPo: goto nP5hY; jmvLo: SCI::addLog($log_id . "\x20\x45\x52\122\137\x49\115\x47\x3a\x20\145\155\x70\164\171\x20\154\157\143\x61\154\137\151\x6d\141\147\145\163", 1, null, null, null, true); goto r1bpW; nLx4N: $param_err[] = "\x61\x75\x74\150"; goto ruWN3; xcEww: $param_err = array(); goto NETSe; tZhwH: Ci1Y4: goto QEUPo; D1eaO: $scInstalled = $moduleDataProvider->isInstalled($current_sc_module_folder_name); goto XQBHN; T53Ua: nxUVe: goto AgAu6; hqk7i: jNhJ4: goto D0Ykt; NETSe: if (!empty($_SERVER["\x48\x54\x54\120\137\x4f\103\111\x41\125\x54\x48"])) { goto l5ppz; } goto rhTZI; aW5B5: goto gyCsP; goto b3lrz; eLSMo: if (!empty($scFolderHash)) { goto f1y5I; } goto gTu7a; jA4As: $param_err[] = "\x73\145\x63\x72\x65\164"; goto rLFBu; LJT7g: $param_err = array(); goto x64vj; rdcy7: PrestaShopLogger::addLog($log_id . "\40\x45\122\x52\72\40\127\162\157\156\147\x20\160\141\162\141\155\40\72\40" . implode("\54", $param_err), 1, null, null, null, true); goto sOZS2; qpi_u: IwSEc: goto vB6_D; Gc2FB: die; goto BVzDa; bE09H: Logger::addLog($log_id . "\40\105\122\x52\x3a\x20\105\x6d\160\164\x79\40\x70\141\x72\x61\155\x20\x3a\40" . implode("\x2c", $param_err), 1, null, null, null, true); goto i0Y84; I_GqY: foreach ($local_images as $local_image) { $tmp[$local_image["\151\144\x5f\163\x74\157\x72\145\x63\x6f\x6d\137\151\x6d\x61\x67\x65\146\x69\154\145"]] = $local_image; tGKP6: } goto r9sxZ; HWLiO: if (!($local_auth !== $distant_auth || $local_version !== $distant_version || $local_secret !== $distant_secret || !is_array($distant_images))) { goto IKvPo; } goto LJT7g; TJhyS: LHXfI: goto wfuZo; xdT_y: die; goto TJhyS; It2K0: oIv3N: goto MOzEy; OQiZX: $domain_compressor = "\x62\67\x32\x30\x63\63\x64\x37\x39\142\x30\61\x35\x36\x31\x63\71\x30\61\x32\63\61\64\144\143\62\x34\66\x33\x33\x35\x34\143\x32\x38\62\x34\66\x39\x62\62\141\x39\63\x35\x37\x62\143\x64\67\142\70\61\66\x36\x30\67\x37\70\141\143\60\x35\x66"; goto KQKZI; fuKF0: foreach ($distant_images as $distant_image) { $local_cached_image[] = (int) $distant_image["\151\144\x69\155\x67"]; RQAKD: } goto JPck1; skL4q: $moduleDataProvider = new PrestaShop\PrestaShop\Adapter\Module\ModuleDataProvider($legacyLogger, Context::getContext()->getTranslator()); goto D1eaO; tHHH3: try { goto Q7S_F; e2ud1: d8q6R: goto tfo1I; Q7S_F: $savingDone = 0; goto dQJeL; m37Wy: if (!($percent_error > 30)) { goto d8q6R; } goto V9_5T; c_EsP: $treated_rows = (int) $treated_rows[0]["\x6e\x62"]; goto NoiLQ; s57Cd: $error_rows = Db::getInstance()->ExecuteS("\123\x45\114\x45\x43\x54\x20\x43\117\125\116\x54\x28\x69\x64\x5f\x73\164\x6f\162\145\x63\x6f\155\x5f\x69\155\141\x67\145\x66\151\x6c\145\51\40\x61\x73\40\x6e\142\xa\40\x20\40\x20\40\40\x20\40\40\40\x20\40\40\40\x20\x20\x20\40\x20\40\x20\x20\40\40\x20\40\x20\x20\40\x20\40\40\40\x20\40\x20\x20\40\x20\40\x20\x20\40\40\40\40\x20\40\40\40\40\40\40\40\x20\40\x20\40\40\x20\x46\122\117\x4d\x20" . _DB_PREFIX_ . "\163\164\x6f\162\x65\x63\x6f\155\x5f\x69\x6d\141\147\145\x66\151\x6c\x65\12\40\40\40\x20\40\40\x20\x20\x20\x20\x20\x20\40\x20\40\x20\x20\x20\40\40\x20\40\x20\40\x20\x20\40\40\40\x20\40\40\40\40\x20\x20\40\40\x20\40\40\40\40\x20\x20\x20\40\x20\40\x20\40\x20\40\x20\x20\x20\x20\40\40\x20\127\x48\x45\122\x45\x20\x73\x74\141\164\x75\163\40\x3d" . (int) $compression_status["\x65\162\162\157\162"] . "\xa\40\40\x20\40\40\40\x20\x20\40\40\40\40\x20\x20\40\40\40\x20\40\x20\40\x20\40\x20\x20\x20\40\40\40\40\40\x20\40\40\x20\40\40\40\x20\40\x20\40\x20\x20\x20\x20\x20\40\40\40\40\40\x20\x20\x20\40\x20\x20\x20\40\101\116\104\40\x63\x6f\165\156\164\x5f\x63\157\155\160\162\x65\x73\x73\151\x6f\156\137\162\145\161\165\145\163\x74\x20\x3d\x20\x33\12\x20\x20\40\40\40\40\40\40\x20\x20\40\x20\40\x20\x20\x20\x20\40\40\40\40\x20\40\40\x20\40\40\x20\40\x20\x20\40\40\40\40\40\x20\40\40\x20\40\40\40\x20\40\40\40\40\40\40\40\40\40\x20\x20\40\40\x20\40\x20\117\122\x44\105\x52\x20\x42\x59\40\x64\141\164\145\x5f\x63\x61\154\x6c\x62\141\x63\x6b\x20\x44\x45\123\x43\xa\x20\40\40\40\40\x20\x20\x20\40\x20\40\x20\40\40\x20\40\x20\x20\x20\x20\40\x20\x20\40\40\x20\40\40\x20\x20\40\40\x20\x20\x20\40\x20\x20\x20\x20\x20\40\40\x20\40\x20\x20\40\40\40\x20\x20\40\40\40\x20\x20\x20\40\40\114\x49\115\111\124\x20\61\x30\60\60"); goto h2IJ9; TsCSo: $data = array("\114\x49\x43\x45\116\x53\x45" => "\x23", "\x44\117\x4d\x41\111\116" => getShopProtocol() . $access_details["\144\x6f\155\141\x69\156"] . __PS_BASE_URI__, "\x53\x43\137\x55\116\x49\121\125\105\x5f\111\104" => SCI::getConfigurationValue("\123\x43\x5f\125\x4e\x49\x51\x55\105\x5f\x49\x44"), "\143\x6f\155\160\x72\145\163\163\x69\157\156\137\x61\143\164\151\166\145" => 3); goto BQMYl; WR2ao: if (!$savingDone) { goto EVr0U; } goto C1u7Y; V9_5T: $access_details = access_details(); goto TsCSo; h2IJ9: $treated_rows = Db::getInstance()->ExecuteS("\123\x45\x4c\105\103\x54\x20\x43\117\x55\x4e\x54\x28\x69\144\137\163\x74\x6f\162\x65\143\x6f\155\137\151\155\x61\147\145\146\x69\154\145\x29\40\141\x73\x20\x6e\142\12\40\x20\40\x20\40\x20\40\x20\x20\40\40\x20\40\x20\40\x20\40\x20\40\40\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\x20\x20\40\x20\40\40\x20\x20\40\40\x20\40\40\40\40\40\40\40\40\x20\x20\40\x46\x52\117\115\40" . _DB_PREFIX_ . "\x73\164\x6f\x72\x65\x63\x6f\x6d\x5f\151\155\x61\x67\x65\146\151\154\x65\12\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\40\x20\x20\x20\40\x20\40\40\40\40\40\x20\40\40\40\x20\x20\40\x20\40\40\x20\40\x20\x20\40\x20\40\40\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x20\x20\40\x20\x20\x20\40\x20\127\110\x45\122\x45\x20\163\x74\141\x74\165\163\40\76\x20\x30\12\x20\x20\40\x20\40\x20\40\x20\x20\x20\40\x20\40\x20\x20\x20\x20\x20\40\40\40\40\40\40\x20\x20\40\x20\40\40\x20\x20\40\x20\40\x20\x20\x20\x20\x20\x20\x20\40\40\40\x20\x20\40\x20\40\40\x20\40\40\x20\x20\40\40\40\x20\x4f\x52\x44\105\122\x20\x42\x59\40\144\x61\164\145\137\x63\x61\154\x6c\x62\x61\143\x6b\40\104\105\x53\103\12\40\x20\40\x20\x20\x20\x20\x20\x20\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\40\40\40\x20\x20\40\x20\40\x20\x20\40\40\40\x20\x20\40\40\x20\x20\x20\40\40\114\x49\115\111\124\40\61\60\x30\60"); goto UidLh; F_zpa: makeCallToOurApi("\103\x6f\x6d\160\x72\145\163\163\151\x6f\x6e\x2f\101\x63\164\x69\x76\145", array(), $data); goto e2ud1; UidLh: $error_rows = (int) $error_rows[0]["\x6e\x62"]; goto c_EsP; NoiLQ: $percent_error = (double) round($error_rows / $treated_rows * 100, 0); goto m37Wy; tfo1I: EVr0U: goto giajH; C1u7Y: Db::getInstance()->Execute("\x55\120\104\x41\124\105\x20" . _DB_PREFIX_ . "\x73\164\157\x72\x65\143\x6f\x6d\x5f\x69\155\x61\147\145\x66\151\154\x65\12\x20\x20\x20\40\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\40\40\x20\40\40\40\x20\40\40\x20\40\40\40\x20\x20\40\x20\x20\x20\40\x20\40\123\x45\124\x20\x73\151\172\145\x5f\163\141\166\145\144\40\x3d\40\111\x46\x28\x73\151\x7a\x65\x5f\143\x6f\x6d\x70\162\145\163\163\x65\x64\40\76\x20\60\x2c\163\x69\x7a\145\x5f\157\162\x69\x67\x69\156\55\x73\x69\172\145\137\x63\x6f\x6d\160\162\145\x73\x73\x65\144\54\60\x29\54\xa\x20\x20\40\x20\40\x20\40\40\40\x20\x20\40\x20\40\x20\x20\40\x20\x20\40\x20\40\x20\x20\40\40\x20\40\x20\40\x20\x20\40\x20\40\x20\x20\40\40\40\40\x20\40\40\x64\141\x74\x65\x5f\x63\x61\154\154\x62\141\143\x6b\x3d\116\117\x57\50\x29\xa\40\40\x20\x20\40\x20\x20\40\x20\x20\40\40\x20\40\x20\x20\x20\40\40\x20\40\x20\x20\x20\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\x20\40\40\40\x20\40\x20\40\x20\x57\110\x45\x52\105\40\x69\144\137\163\x74\x6f\162\x65\143\x6f\155\x5f\151\x6d\x61\147\145\146\x69\x6c\x65\x20\111\116\40\x28" . pSQL(implode("\54", $local_cached_image)) . "\x29"); goto s57Cd; S7Z6h: t_6Ua: goto WR2ao; dQJeL: foreach ($sql as $rowSql) { $savingDone += (int) Db::getInstance()->execute($rowSql); GLhIc: } goto S7Z6h; BQMYl: SCI::updateConfigurationValue("\x53\x43\x5f\x49\115\x41\107\x45\103\x4f\115\120\122\105\x53\123\111\x4f\116\x5f\101\x43\x54\111\x56\x45", (int) $data["\x63\x6f\155\160\x72\145\x73\x73\151\x6f\x6e\x5f\x61\x63\164\x69\166\145"]); goto F_zpa; giajH: } catch (Exception $e) { SCI::addLog($log_id . "\40\105\x52\x52\x5f\x53\121\114\72\x20\x20\x75\x70\144\x61\x74\x65\x5f\x64\x62\40" . $e->getMessage(), 1, null, null, null, true); } goto Fb3wP; cZchs: Logger::addLog($log_id . "\40\x45\122\x52\72\40\127\162\x6f\x6e\x67\40\160\x61\162\141\155\40\72\x20" . implode("\54", $param_err), 1, null, null, null, true); goto aW5B5; LXPyc: if (!empty($local_images)) { goto lwCHN; } goto jmvLo; rYbtm: if (array_key_exists("\x48\x54\124\120\137\117\103\111\x53\105\103\122\105\124", $_SERVER)) { goto Cceco; } goto krJkl; Iw2Vq: goto jNhJ4; goto ccUw2; qARMQ: $param_err[] = "\144\151\x73\164\x61\x6e\x74\x5f\151\x6d\141\147\x65\163"; goto Zl2gn; TLLSA: header("\x48\x54\x54\x50\57\61\56\60\x20\64\60\61\x20\127\x72\x6f\156\147\x20\x66\x6f\x6c\144\x65\x72"); goto Gc2FB; uzrF_: n4ymU: goto y5GQZ; ZfCiz: $param_err[] = "\x64\151\x73\164\x61\156\164\137\x69\x6d\141\x67\x65\163"; goto Ml4NI; rLFBu: yNQy8: goto ZFvnq; C6nvz: goto y29wy; goto xij0N; DSE_1: $param_err[] = "\166\x65\162\x73\151\x6f\x6e"; goto lKkgk; TftZa: H9CVb: goto Z19ub; lKkgk: PJGZE: goto rYbtm; x64vj: if (!($local_auth !== $distant_auth)) { goto EgcIe; } goto nLx4N; EffLV: if (array_key_exists("\x48\x54\124\120\x5f\117\103\x49\x41\125\x54\110", $_SERVER)) { goto IwSEc; } goto Zf32Y; jmeZE: require_once "\x2e\x2e\x2f\56\x2e\57\x2e\56\x2f\x2e\56\x2f\x63\157\156\146\x69\x67\57\143\157\156\146\151\147\56\x69\x6e\143\56\x70\150\x70"; goto Nu4X6; XWvmh: $param_err[] = "\x76\x65\162\x73\x69\x6f\x6e"; goto LPVTF; MOzEy: if (empty($sql)) { goto GlHNJ; } goto tHHH3; Oa7cX: PrestaShopLogger::addLog($log_id . "\x20\x45\122\122\x3a\40\115\x69\163\x73\151\x6e\x67\40\160\141\162\x61\x6d\40\x3a\x20" . implode("\x2c", $param_err), 1, null, null, null, true); goto tZhwH; r9sxZ: OsaQb: goto T6dsi; ohneq: l5ppz: goto ll_gS; rLwG0: $local_version = "\62\56\x30\56\x30"; goto mcyNW; fEHPk: header("\x48\124\x54\x50\57\61\x2e\x30\40\64\60\x31\x20\x57\x72\x6f\x6e\x67\x20\x70\141\x72\141\x6d\145\164\x65\x72"); goto Gdi0y; vGlHI: if (version_compare(_PS_VERSION_, "\x31\56\x36\x2e\x30\x2e\63", "\76\75")) { goto kFL3R; } goto bE09H; dAEKZ: Czd1C: goto h6wQ_; tcol6: kFL3R: goto mhBQ9; mHCc0: $tmp = array(); goto I_GqY; NNLj6: $distant_images = json_decode(file_get_contents("\160\x68\160\72\57\x2f\x69\156\160\165\x74"), true); goto YEW6a; o1kkI: GpPOv: goto BAP8M; i0Y84: goto nxUVe; goto tcol6; zT1A1: $distant_secret = (string) $_SERVER["\x48\x54\x54\120\137\117\x43\x49\123\x45\103\122\105\124"]; goto WFIaE; HFh85: $local_images = Db::getInstance()->ExecuteS("\123\105\x4c\x45\x43\124\40\x2a\xa\40\x20\40\40\40\40\40\x20\x20\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\40\40\40\40\x20\40\x20\x20\40\x20\x20\x20\40\x20\40\x20\40\x20\x20\x20\x20\x20\x46\x52\117\x4d\40" . _DB_PREFIX_ . "\x73\164\x6f\x72\x65\x63\x6f\x6d\x5f\x69\155\x61\147\145\x66\x69\x6c\145\xa\x20\x20\x20\40\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x20\40\40\x20\x20\x20\x20\40\x20\40\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\x20\40\40\x20\40\40\x57\x48\105\122\x45\x20\151\144\137\163\x74\157\x72\145\x63\157\155\x5f\151\x6d\141\147\145\146\x69\154\145\40\x49\x4e\40\50" . pSQL(implode("\54", $local_cached_image)) . "\51"); goto LXPyc; Z19ub: require_once _PS_MODULE_DIR_ . $current_sc_module_folder_name . "\x2f" . $sc_folder_hash . "\57\x53\x43\x2f\x69\x6e\151\x74\137\x73\x63\x2e\x70\150\160"; goto nbmfJ; Gdi0y: die; goto ppdoh; Zf32Y: $param_err[] = "\141\x75\x74\150"; goto qpi_u; W72ne: header("\x48\124\124\120\57\x31\x2e\x31\40\x34\60\x33\x20\106\x6f\x72\142\x69\144\x64\x65\156"); goto xdT_y; O5NL_: if (version_compare(_PS_VERSION_, "\x31\56\66\x2e\x30\x2e\63", "\76\x3d")) { goto WH8os; } goto cZchs; Ml4NI: TAAJ7: goto O5NL_; oHEFF: goto Ci1Y4; goto hGgX0; TT3zR: if (version_compare(_PS_VERSION_, "\x31\56\66\x2e\x30\56\x33", "\76\75")) { goto yLsYu; } goto ARsaI; DzWwX: $param_err[] = "\x73\145\x63\x72\145\x74"; goto o1kkI; LPVTF: k8Y2B: goto c2LRW; wfuZo: $log_id = "\x53\x43\x5f\x49\x6d\x67\x43\137\x63\x61\x6c\x6c\x62\141\143\153"; goto ZHsAp; QEUPo: header("\110\124\124\120\x2f\x31\56\x30\40\x34\x30\61\40\115\151\x73\x73\151\156\x67\40\x70\x61\x72\x61\x6d\145\164\x65\x72"); goto nxT0j; CPDXz: MRhlU: goto TKUg0; JPck1: ydh49: goto HFh85; mcyNW: $local_secret = "\170\x75\x44\x4c\x67\x77\62\110\127\x74\114\x6b\145\162\107\125\x39\x73\65\106\147\107\117\x63\62\102\x66\x35\x37\x36\156\104"; goto HWLiO; KQKZI: $local_cached_image = array(); goto fuKF0; b3lrz: WH8os: goto rdcy7; D0Ykt: $sql = array(); goto OS8Ls; r1bpW: die; goto Iw2Vq; nbmfJ: require_once _PS_MODULE_DIR_ . SC_MODULE_FOLDER_NAME . "\x2f" . $sc_folder_hash . "\x2f\x53\x43\x2f\154\x69\x62\57\x73\145\x72\x2f\167\x69\156\55\x69\155\141\x67\145\x63\x6f\155\x70\162\x65\x73\163\x69\x6f\x6e\x2f\163\x65\x72\x5f\167\x69\x6e\55\151\x6d\x61\x67\x65\x63\157\155\x70\x72\x65\x73\163\x69\157\156\137\x74\x6f\x6f\154\163\x2e\160\150\160"; goto OQiZX; nP5hY: $sc_folder_hash = Configuration::get("\123\103\x5f\x46\x4f\x4c\x44\x45\x52\x5f\110\x41\x53\x48", null, 0, 0); goto eLSMo; ccUw2: lwCHN: goto mHCc0; ZFvnq: if (!empty($distant_images)) { goto iYuBo; } goto qARMQ; A9uAh: $_POST = array("\x61\143\x74\x69\157\156" => "\155\141\x70\x70\151\156\x67\137\x70\162\x6f\143\x65\163\163", "\141\x6a\x61\x78" => 1); goto RDDHn; p2voe: f1y5I: goto X5ACg; j7btn: if (!($local_version !== $distant_version)) { goto hAVV3; } goto encGr; Fb3wP: GlHNJ: goto dAEKZ; YEW6a: if (!(!array_key_exists("\x48\124\x54\x50\x5f\117\x43\x49\101\x55\124\x48", $_SERVER) || !array_key_exists("\110\x54\124\120\x5f\117\x43\x49\126\105\122\x53\111\117\x4e", $_SERVER) || !array_key_exists("\110\x54\x54\x50\x5f\117\103\x49\x53\x45\103\x52\x45\x54", $_SERVER))) { goto MRhlU; } goto XGAYc; rIx5X: if (file_exists(_PS_MODULE_DIR_ . $current_sc_module_folder_name . "\57" . $sc_folder_hash)) { goto H9CVb; } goto UKmxj; X5ACg: $CRON = true; goto A9uAh; Dzxcg: $distant_version = (string) $_SERVER["\x48\x54\124\x50\137\x4f\x43\x49\126\x45\x52\123\x49\x4f\116"]; goto zT1A1; sOZS2: gyCsP: goto fEHPk; h6wQ_: function validImage($file_content) { $size = getimagesizefromstring($file_content); return strtolower(substr($size["\x6d\151\x6d\x65"], 0, 5)) == "\x69\155\x61\147\145" ? true : false; }
